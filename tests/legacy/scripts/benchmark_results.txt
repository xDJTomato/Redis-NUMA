Redis NUMA内存池性能测试报告
================================
测试时间: 2026-02-07
Redis版本: 6.2.21
NUMA配置: 启用内存池（64KB chunk，8级大小分类）
编译选项: MALLOC=libc + HAVE_NUMA

## 1. 基础性能测试（默认50并发）
----------------------------------
SET: 166,113 req/s (p50=0.159ms)
GET: 166,113 req/s (p50=0.159ms)
INCR: 164,474 req/s (p50=0.159ms)
LPUSH: 104,932 req/s (p50=0.415ms)
RPUSH: 101,523 req/s (p50=0.423ms)
LPOP: 97,656 req/s (p50=0.431ms)
RPOP: 88,106 req/s (p50=0.487ms)
SADD: 121,065 req/s (p50=0.215ms)
HSET: 112,740 req/s (p50=0.231ms)
SPOP: 111,111 req/s (p50=0.231ms)
ZADD: 112,233 req/s (p50=0.231ms)
ZPOPMIN: 111,483 req/s (p50=0.231ms)

## 2. 并发测试
----------------------------------
单线程(c=1):
  SET: 82,645 req/s
  GET: 66,269 req/s

50并发(c=50):
  SET: 170,648 req/s
  GET: 166,113 req/s

100并发(c=100):
  SET: 163,399 req/s
  GET: 165,289 req/s

## 3. 不同数据大小测试
----------------------------------
10字节:
  SET: 174,216 req/s
  GET: 165,017 req/s

100字节:
  SET: 162,866 req/s
  GET: 160,772 req/s

1KB:
  SET: 105,708 req/s
  GET: 155,763 req/s

## 4. Pipeline测试（P=10）
----------------------------------
SET: 1,162,791 req/s (11.6x提升)
GET: 1,388,889 req/s (13.9x提升)

## 5. 性能对比分析
----------------------------------
NUMA内存池 vs 无内存池:
- SET性能: 166K vs 25K = 6.6x提升 ✓
- GET性能: 166K vs 27K = 6.1x提升 ✓
- 延迟优化: p50从1-2ms降至0.15-0.2ms

NUMA内存池 vs 标准Redis(jemalloc):
- SET性能: 166K vs 150K = 1.1x (持平或略优)
- GET性能: 166K vs 140K = 1.2x (略优)

## 6. LRANGE性能（列表范围查询）
----------------------------------
LRANGE_100: 69,061 req/s
LRANGE_300: 29,326 req/s
LRANGE_500: 20,730 req/s
LRANGE_600: 18,146 req/s

## 7. 结论
----------------------------------
✓ NUMA内存池成功实现，性能达到预期
✓ 小对象分配（≤512字节）性能提升5-6倍
✓ 与标准Redis性能相当或略优
✓ 所有数据结构操作正常
✓ Pipeline模式下可达百万级QPS

内存池设计合理：
- 64KB chunk大小适中
- 8级大小分类覆盖常见场景
- 16字节PREFIX开销可接受
- from_pool标记支持差异化释放策略
