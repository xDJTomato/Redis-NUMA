快速测试 Sat Feb 14 13:29:13 CST 2026
[INFO] 13:29:13 执行FLUSHALL...
[INFO] 13:29:15 快速填充1.5GB数据...

========== 内存填充阶段 (目标: 1536MB, 渐进式填充避免OOM) ==========
[INFO] 13:29:15 当前内存: 20MB, 目标: 1536MB
[INFO] 13:29:15 需要填充: 1516MB
[WARN] 13:29:15 采用保守填充策略避免OOM: 批次=50000, value=2048B
[INFO] 13:29:15 计划填充: 776192 个 2048B 的key
[INFO] 13:29:15 启动内存监控 (PID=515997, 间隔=2秒)
[INFO] 13:29:15 内存监控已启动 (监控PID=516212)
[INFO] 13:29:15 填充批次: 50000 keys (range: 500000)
[INFO] 13:29:15 已填充: 50000/776192 keys (6%)
[INFO] 13:29:16 填充批次: 50000 keys (range: 500000)
[INFO] 13:29:16 已填充: 100000/776192 keys (12%)
[INFO] 13:29:17 填充批次: 50000 keys (range: 500000)
[INFO] 13:29:17 已填充: 150000/776192 keys (19%)
[INFO] 13:29:17 填充批次: 50000 keys (range: 500000)
[INFO] 13:29:18 已填充: 200000/776192 keys (25%)
[INFO] 13:29:18 填充批次: 50000 keys (range: 500000)
[INFO] 13:29:19 已填充: 250000/776192 keys (32%)
[INFO] 13:29:19 填充批次: 50000 keys (range: 500000)
[INFO] 13:29:20 已填充: 300000/776192 keys (38%)
[INFO] 13:29:20 填充批次: 50000 keys (range: 500000)
[INFO] 13:29:20 已填充: 350000/776192 keys (45%)
[INFO] 13:29:21 填充批次: 50000 keys (range: 500000)
[INFO] 13:29:21 已填充: 400000/776192 keys (51%)
[INFO] 13:29:22 填充批次: 50000 keys (range: 500000)
[INFO] 13:29:22 已填充: 450000/776192 keys (57%)
[INFO] 13:29:23 填充批次: 50000 keys (range: 500000)
[INFO] 13:29:23 已填充: 500000/776192 keys (64%)
[INFO] 13:29:24 填充批次: 50000 keys (range: 500000)
[INFO] 13:29:24 已填充: 550000/776192 keys (70%)
[INFO] 13:29:25 填充批次: 50000 keys (range: 500000)
[WARN] 13:29:25 内存已接近目标(1465MB/1536MB),停止填充
[INFO] 13:29:28 填充完成: 1465MB / 1536MB (95%), Keys: 333613, 耗时: 10s

========== 内存池统计信息 ==========
[INFO] 13:29:28 Redis内存详情:
used_memory:731172654
used_memory_human:697.30M
used_memory_rss:1536782336
used_memory_rss_human:1.43G
used_memory_peak:732161880
used_memory_peak_human:698.24M
used_memory_peak_perc:99.86%
used_memory_overhead:18524501
used_memory_startup:985677
used_memory_dataset:712648153
used_memory_dataset_perc:97.60%
allocator_allocated:731122134
allocator_active:1536750592
allocator_resident:1536750592
used_memory_lua:31744
used_memory_lua_human:31.00K
used_memory_scripts:0
used_memory_scripts_human:0B
allocator_frag_ratio:2.10
allocator_frag_bytes:805628458
allocator_rss_ratio:1.00
allocator_rss_bytes:0
mem_fragmentation_ratio:2.10
mem_fragmentation_bytes:805660202
mem_allocator:libc
[INFO] 13:29:28 进程内存映射统计:
Private_Dirty: 1499104 kB
Private_Clean: 1252 kB
Rss: 1501948 kB
Shared_Dirty: 0 kB
Shared_Clean: 1592 kB
Pss: 1500366 kB
Size: 1534816 kB
[INFO] 13:29:28 NUMA内存分布:

Per-node process memory usage (in MBs) for PID 515997 (redis-server)
                           Node 0           Total
                  --------------- ---------------
Huge                         0.00            0.00
Heap                         0.54            0.54
Stack                        0.02            0.02
Private                   1466.18         1466.18
----------------  --------------- ---------------
Total                     1466.74         1466.74

========== 内存碎片分析 ==========
[INFO] 13:29:28 内存碎片率: 2.10
[INFO] 13:29:28 分析内存块分布...
[INFO] 13:29:28 大内存块(>64MB)数量: 6
[INFO] 13:29:28 运行基础性能测试...
[INFO] 13:29:28 运行性能测试套件: quick_test (50000 请求)
"test","rps","avg_latency_ms","min_latency_ms","p50_latency_ms","p95_latency_ms","p99_latency_ms","max_latency_ms"
"SET","271739.12","0.562","0.064","0.567","0.807","1.191","1.543"
"GET","617283.94","0.240","0.056","0.247","0.327","0.407","0.919"
"INCR","649350.62","0.229","0.056","0.239","0.303","0.351","0.559"
"LPUSH","131233.59","1.187","0.072","1.135","2.031","2.295","2.687"
"RPUSH","136986.30","1.138","0.064","1.095","1.871","2.271","2.535"
"LPOP","127226.46","1.228","0.048","1.175","2.191","2.591","3.119"
"RPOP","123762.38","1.266","0.072","1.207","2.231","2.511","2.711"
"SADD","561797.75","0.269","0.136","0.271","0.359","0.487","1.207"
"HSET","438596.50","0.347","0.144","0.319","0.463","1.935","4.383"
"SPOP","485436.91","0.310","0.056","0.327","0.415","0.535","1.231"
"ZADD","324675.31","0.471","0.128","0.479","0.647","0.719","2.439"
"ZPOPMIN","87873.46","1.797","0.080","1.655","2.623","3.495","4.159"
[INFO] 13:29:31 收集内存池统计...

========== 内存池统计信息 ==========
[INFO] 13:29:31 Redis内存详情:
used_memory:710708124
used_memory_human:677.78M
used_memory_rss:1635868672
used_memory_rss_human:1.52G
used_memory_peak:732161880
used_memory_peak_human:698.24M
used_memory_peak_perc:97.07%
used_memory_overhead:21779781
used_memory_startup:985677
used_memory_dataset:688928343
used_memory_dataset_perc:97.07%
allocator_allocated:712711859
allocator_active:1635836928
allocator_resident:1635836928
used_memory_lua:31744
used_memory_lua_human:31.00K
used_memory_scripts:0
used_memory_scripts_human:0B
allocator_frag_ratio:2.30
allocator_frag_bytes:923125069
allocator_rss_ratio:1.00
allocator_rss_bytes:0
mem_fragmentation_ratio:2.30
mem_fragmentation_bytes:923156813
mem_allocator:libc
[INFO] 13:29:31 进程内存映射统计:
Private_Dirty: 1595436 kB
Private_Clean: 1252 kB
Rss: 1598280 kB
Shared_Dirty: 0 kB
Shared_Clean: 1592 kB
Pss: 1596698 kB
Size: 1631048 kB
[INFO] 13:29:31 NUMA内存分布:

Per-node process memory usage (in MBs) for PID 515997 (redis-server)
                           Node 0           Total
                  --------------- ---------------
Huge                         0.00            0.00
Heap                         0.99            0.99
Stack                        0.02            0.02
Private                   1559.80         1559.80
----------------  --------------- ---------------
Total                     1560.82         1560.82

========== 内存碎片分析 ==========
[INFO] 13:29:31 内存碎片率: 2.30
[INFO] 13:29:31 分析内存块分布...
[INFO] 13:29:31 大内存块(>64MB)数量: 0
[INFO] 13:29:31 快速测试完成
[INFO] 13:29:31 最终内存: 1559MB
[INFO] 13:29:31 最终Keys: 414995
[INFO] 13:29:31 NUMA配置:

========== 生成诊断报告 ==========
[INFO] 13:29:31 诊断报告已保存: /home/xdjtomato/下载/Redis with CXL/redis-CXL in v6.2.21/tests/reports/diagnosis_20260214_132913/DIAGNOSIS_SUMMARY.txt
