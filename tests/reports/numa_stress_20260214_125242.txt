快速测试 Sat Feb 14 12:52:42 CST 2026
[INFO] 12:52:42 执行FLUSHALL...
[INFO] 12:52:44 快速填充1.5GB数据...

========== 内存填充阶段 (目标: 1536MB, 渐进式填充避免OOM) ==========
[INFO] 12:52:44 当前内存: 415MB, 目标: 1536MB
[INFO] 12:52:44 需要填充: 1121MB
[WARN] 12:52:44 采用保守填充策略避免OOM: 批次=50000, value=2048B
[INFO] 12:52:44 计划填充: 573952 个 2048B 的key
[INFO] 12:52:44 启动内存监控 (PID=474610, 间隔=2秒)
[INFO] 12:52:44 内存监控已启动 (监控PID=474775)
[INFO] 12:52:44 填充批次: 50000 keys (range: 500000)
[INFO] 12:52:44 已填充: 50000/573952 keys (8%)
[INFO] 12:52:44 填充批次: 50000 keys (range: 500000)
[INFO] 12:52:45 已填充: 100000/573952 keys (17%)
[INFO] 12:52:45 填充批次: 50000 keys (range: 500000)
[INFO] 12:52:45 已填充: 150000/573952 keys (26%)
[INFO] 12:52:46 填充批次: 50000 keys (range: 500000)
[INFO] 12:52:46 已填充: 200000/573952 keys (34%)
[INFO] 12:52:46 填充批次: 50000 keys (range: 500000)
[INFO] 12:52:47 已填充: 250000/573952 keys (43%)
[INFO] 12:52:47 填充批次: 50000 keys (range: 500000)
[INFO] 12:52:47 已填充: 300000/573952 keys (52%)
[INFO] 12:52:48 填充批次: 50000 keys (range: 500000)
[INFO] 12:52:48 已填充: 350000/573952 keys (60%)
[INFO] 12:52:49 填充批次: 50000 keys (range: 500000)
[INFO] 12:52:49 已填充: 400000/573952 keys (69%)
[INFO] 12:52:49 填充批次: 50000 keys (range: 500000)
[INFO] 12:52:49 已填充: 450000/573952 keys (78%)
[INFO] 12:52:50 填充批次: 50000 keys (range: 500000)
[INFO] 12:52:50 已填充: 500000/573952 keys (87%)
[INFO] 12:52:51 填充批次: 50000 keys (range: 500000)
[WARN] 12:52:51 内存已接近目标(1538MB/1536MB),停止填充
[INFO] 12:52:54 填充完成: 1538MB / 1536MB (100%), Keys: 316570, 耗时: 7s

========== 内存池统计信息 ==========
[INFO] 12:52:54 Redis内存详情:
used_memory:694087255
used_memory_human:661.93M
used_memory_rss:1612877824
used_memory_rss_human:1.50G
used_memory_peak:695055926
used_memory_peak_human:662.86M
used_memory_peak_perc:99.86%
used_memory_overhead:17842717
used_memory_startup:985613
used_memory_dataset:676244538
used_memory_dataset_perc:97.57%
allocator_allocated:694036735
allocator_active:1612846080
allocator_resident:1612846080
used_memory_lua:31744
used_memory_lua_human:31.00K
used_memory_scripts:0
used_memory_scripts_human:0B
allocator_frag_ratio:2.32
allocator_frag_bytes:918809345
allocator_rss_ratio:1.00
allocator_rss_bytes:0
mem_fragmentation_ratio:2.32
mem_fragmentation_bytes:918841089
mem_allocator:libc
[INFO] 12:52:54 进程内存映射统计:
Private_Dirty: 1572916 kB
Private_Clean: 1336 kB
Rss: 1576084 kB
Shared_Dirty: 0 kB
Shared_Clean: 1832 kB
Pss: 1574264 kB
Size: 1609208 kB
[INFO] 12:52:54 NUMA内存分布:

Per-node process memory usage (in MBs) for PID 474610 (redis-server)
                           Node 0           Total
                  --------------- ---------------
Huge                         0.00            0.00
Heap                         0.82            0.82
Stack                        0.02            0.02
Private                   1538.29         1538.29
----------------  --------------- ---------------
Total                     1539.14         1539.14

========== 内存碎片分析 ==========
[INFO] 12:52:54 内存碎片率: 2.32
[INFO] 12:52:54 分析内存块分布...
[INFO] 12:52:54 大内存块(>64MB)数量: 4
[INFO] 12:52:54 运行基础性能测试...
[INFO] 12:52:54 运行性能测试套件: quick_test (50000 请求)
"test","rps","avg_latency_ms","min_latency_ms","p50_latency_ms","p95_latency_ms","p99_latency_ms","max_latency_ms"
"SET","515463.91","0.295","0.080","0.303","0.431","0.551","0.863"
"GET","595238.12","0.248","0.056","0.247","0.351","0.455","0.703"
"INCR","625000.00","0.240","0.048","0.247","0.319","0.359","0.463"
"LPUSH","179856.11","0.865","0.064","0.799","1.807","2.191","2.575"
"RPUSH","161812.31","0.964","0.072","0.855","2.047","2.455","2.791"
"LPOP","142450.14","1.091","0.096","1.039","2.199","2.679","3.527"
"RPOP","134048.27","1.157","0.080","1.071","2.311","2.895","3.343"
"SADD","320512.81","0.473","0.080","0.495","0.623","0.791","1.311"
"HSET","292397.66","0.519","0.088","0.503","0.671","1.631","4.735"
"SPOP","335570.47","0.453","0.104","0.471","0.607","0.751","1.559"
"ZADD","218340.61","0.694","0.120","0.711","0.903","1.023","1.663"
"ZPOPMIN","65274.15","2.413","0.112","2.279","3.695","4.511","7.263"
[INFO] 12:52:57 收集内存池统计...

========== 内存池统计信息 ==========
[INFO] 12:52:57 Redis内存详情:
used_memory:675257858
used_memory_human:643.98M
used_memory_rss:1985138688
used_memory_rss_human:1.85G
used_memory_peak:695055926
used_memory_peak_human:662.86M
used_memory_peak_perc:97.15%
used_memory_overhead:21134037
used_memory_startup:985613
used_memory_dataset:654123821
used_memory_dataset_perc:97.01%
allocator_allocated:676320109
allocator_active:1985106944
allocator_resident:1985106944
used_memory_lua:31744
used_memory_lua_human:31.00K
used_memory_scripts:0
used_memory_scripts_human:0B
allocator_frag_ratio:2.94
allocator_frag_bytes:1308786835
allocator_rss_ratio:1.00
allocator_rss_bytes:0
mem_fragmentation_ratio:2.94
mem_fragmentation_bytes:1308818579
mem_allocator:libc
[INFO] 12:52:57 进程内存映射统计:
Private_Dirty: 1936336 kB
Private_Clean: 1336 kB
Rss: 1939504 kB
Shared_Dirty: 0 kB
Shared_Clean: 1832 kB
Pss: 1937684 kB
Size: 1972764 kB
[INFO] 12:52:57 NUMA内存分布:

Per-node process memory usage (in MBs) for PID 474610 (redis-server)
                           Node 0           Total
                  --------------- ---------------
Huge                         0.00            0.00
Heap                         1.32            1.32
Stack                        0.03            0.03
Private                   1892.70         1892.70
----------------  --------------- ---------------
Total                     1894.04         1894.04

========== 内存碎片分析 ==========
[INFO] 12:52:57 内存碎片率: 2.94
[INFO] 12:52:57 分析内存块分布...
[INFO] 12:52:57 大内存块(>64MB)数量: 4
[INFO] 12:52:57 快速测试完成
[INFO] 12:52:57 最终内存: 1893MB
[INFO] 12:52:57 最终Keys: 398853
[INFO] 12:52:57 NUMA配置:

========== 生成诊断报告 ==========
[INFO] 12:52:57 诊断报告已保存: /home/xdjtomato/下载/Redis with CXL/redis-CXL in v6.2.21/tests/reports/diagnosis_20260214_125242/DIAGNOSIS_SUMMARY.txt
