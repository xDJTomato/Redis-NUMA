快速测试 Sat Feb 14 12:51:14 CST 2026
[INFO] 12:51:15 执行FLUSHALL...
[INFO] 12:51:17 快速填充1.5GB数据...

========== 内存填充阶段 (目标: 1536MB, 渐进式填充避免OOM) ==========
[INFO] 12:51:17 当前内存: 955MB, 目标: 1536MB
[INFO] 12:51:17 需要填充: 581MB
[WARN] 12:51:17 采用保守填充策略避免OOM: 批次=50000, value=2048B
[INFO] 12:51:17 计划填充: 297472 个 2048B 的key
[INFO] 12:51:17 启动内存监控 (PID=473134, 间隔=2秒)
[INFO] 12:51:17 内存监控已启动 (监控PID=473381)
[INFO] 12:51:17 填充批次: 50000 keys (range: 500000)
[INFO] 12:51:17 已填充: 50000/297472 keys (16%)
[INFO] 12:51:17 填充批次: 50000 keys (range: 500000)
[INFO] 12:51:17 已填充: 100000/297472 keys (33%)
[INFO] 12:51:18 填充批次: 50000 keys (range: 500000)
[INFO] 12:51:18 已填充: 150000/297472 keys (50%)
[INFO] 12:51:19 填充批次: 50000 keys (range: 500000)
[INFO] 12:51:19 已填充: 200000/297472 keys (67%)
[INFO] 12:51:19 填充批次: 50000 keys (range: 500000)
[INFO] 12:51:19 已填充: 250000/297472 keys (84%)
[INFO] 12:51:20 填充批次: 47472 keys (range: 500000)
[WARN] 12:51:20 内存已接近目标(1520MB/1536MB),停止填充
[INFO] 12:51:23 填充完成: 1520MB / 1536MB (98%), Keys: 196721, 耗时: 3s

========== 内存池统计信息 ==========
[INFO] 12:51:23 Redis内存详情:
used_memory:431198446
used_memory_human:411.22M
used_memory_rss:1594085376
used_memory_rss_human:1.48G
used_memory_peak:989439371
used_memory_peak_human:943.60M
used_memory_peak_perc:43.58%
used_memory_overhead:10951605
used_memory_startup:985613
used_memory_dataset:420246841
used_memory_dataset_perc:97.68%
allocator_allocated:431147926
allocator_active:1594053632
allocator_resident:1594053632
used_memory_lua:31744
used_memory_lua_human:31.00K
used_memory_scripts:0
used_memory_scripts_human:0B
allocator_frag_ratio:3.70
allocator_frag_bytes:1162905706
allocator_rss_ratio:1.00
allocator_rss_bytes:0
mem_fragmentation_ratio:3.70
mem_fragmentation_bytes:1162937450
mem_allocator:libc
[INFO] 12:51:23 进程内存映射统计:
Private_Dirty: 1554912 kB
Private_Clean: 1220 kB
Rss: 1557960 kB
Shared_Dirty: 0 kB
Shared_Clean: 1828 kB
Pss: 1556143 kB
Size: 1591000 kB
[INFO] 12:51:23 NUMA内存分布:

Per-node process memory usage (in MBs) for PID 473134 (redis-server)
                           Node 0           Total
                  --------------- ---------------
Huge                         0.00            0.00
Heap                         0.74            0.74
Stack                        0.02            0.02
Private                   1520.68         1520.68
----------------  --------------- ---------------
Total                     1521.44         1521.44

========== 内存碎片分析 ==========
[INFO] 12:51:23 内存碎片率: 3.70
[INFO] 12:51:23 分析内存块分布...
[INFO] 12:51:23 大内存块(>64MB)数量: 5
[INFO] 12:51:23 运行基础性能测试...
[INFO] 12:51:23 运行性能测试套件: quick_test (50000 请求)
"test","rps","avg_latency_ms","min_latency_ms","p50_latency_ms","p95_latency_ms","p99_latency_ms","max_latency_ms"
"SET","588235.31","0.256","0.056","0.263","0.343","0.471","0.831"
"GET","684931.50","0.212","0.064","0.207","0.303","0.407","0.727"
"INCR","471698.12","0.320","0.072","0.303","0.455","0.703","1.919"
"LPUSH","167785.23","0.925","0.064","0.863","1.839","2.759","3.471"
"RPUSH","157232.70","0.992","0.064","0.951","2.127","2.423","3.447"
"LPOP","161812.31","0.961","0.120","0.911","1.919","2.255","3.039"
"RPOP","156739.81","0.992","0.096","0.919","1.999","2.247","2.583"
"SADD","400000.00","0.377","0.176","0.391","0.503","0.631","1.343"
"HSET","331125.84","0.463","0.072","0.447","0.623","1.247","4.535"
"SPOP","352112.66","0.431","0.032","0.447","0.591","0.759","1.575"
"ZADD","238095.25","0.636","0.096","0.647","0.847","0.983","1.639"
"ZPOPMIN","71225.07","2.212","0.104","2.047","3.111","4.143","5.407"
[INFO] 12:51:26 收集内存池统计...

========== 内存池统计信息 ==========
[INFO] 12:51:26 Redis内存详情:
used_memory:426998017
used_memory_human:407.22M
used_memory_rss:1969164288
used_memory_rss_human:1.83G
used_memory_peak:989439371
used_memory_peak_human:943.60M
used_memory_peak_perc:43.16%
used_memory_overhead:16563997
used_memory_startup:985613
used_memory_dataset:410434020
used_memory_dataset_perc:96.34%
allocator_allocated:426947497
allocator_active:1969132544
allocator_resident:1969132544
used_memory_lua:31744
used_memory_lua_human:31.00K
used_memory_scripts:0
used_memory_scripts_human:0B
allocator_frag_ratio:4.61
allocator_frag_bytes:1542185047
allocator_rss_ratio:1.00
allocator_rss_bytes:0
mem_fragmentation_ratio:4.61
mem_fragmentation_bytes:1542216791
mem_allocator:libc
[INFO] 12:51:26 进程内存映射统计:
Private_Dirty: 1921084 kB
Private_Clean: 1284 kB
Rss: 1924196 kB
Shared_Dirty: 0 kB
Shared_Clean: 1828 kB
Pss: 1922379 kB
Size: 1957644 kB
[INFO] 12:51:26 NUMA内存分布:

Per-node process memory usage (in MBs) for PID 473134 (redis-server)
                           Node 0           Total
                  --------------- ---------------
Huge                         0.00            0.00
Heap                         1.25            1.25
Stack                        0.02            0.02
Private                   1877.82         1877.82
----------------  --------------- ---------------
Total                     1879.09         1879.09

========== 内存碎片分析 ==========
[INFO] 12:51:26 内存碎片率: 4.61
[INFO] 12:51:26 分析内存块分布...
[INFO] 12:51:26 大内存块(>64MB)数量: 6
[INFO] 12:51:26 快速测试完成
[INFO] 12:51:26 最终内存: 1877MB
[INFO] 12:51:26 最终Keys: 284602
[INFO] 12:51:26 NUMA配置:

========== 生成诊断报告 ==========
[INFO] 12:51:26 诊断报告已保存: /home/xdjtomato/下载/Redis with CXL/redis-CXL in v6.2.21/tests/reports/diagnosis_20260214_125114/DIAGNOSIS_SUMMARY.txt
