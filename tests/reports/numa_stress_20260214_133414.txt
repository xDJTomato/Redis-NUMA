快速测试 Sat Feb 14 13:34:14 CST 2026
[INFO] 13:34:14 执行FLUSHALL...
[INFO] 13:34:16 快速填充1.5GB数据...

========== 内存填充阶段 (目标: 1536MB, 渐进式填充避免OOM) ==========
[INFO] 13:34:16 当前内存: 59MB, 目标: 1536MB
[INFO] 13:34:16 需要填充: 1477MB
[WARN] 13:34:16 采用保守填充策略避免OOM: 批次=50000, value=2048B
[INFO] 13:34:16 计划填充: 756224 个 2048B 的key
[INFO] 13:34:16 启动内存监控 (PID=519757, 间隔=2秒)
[INFO] 13:34:16 内存监控已启动 (监控PID=519923)
[INFO] 13:34:16 填充批次: 50000 keys (range: 500000)
[INFO] 13:34:16 已填充: 50000/756224 keys (6%)
[INFO] 13:34:17 填充批次: 50000 keys (range: 500000)
[INFO] 13:34:17 已填充: 100000/756224 keys (13%)
[INFO] 13:34:18 填充批次: 50000 keys (range: 500000)
[INFO] 13:34:18 已填充: 150000/756224 keys (19%)
[INFO] 13:34:19 填充批次: 50000 keys (range: 500000)
[INFO] 13:34:19 已填充: 200000/756224 keys (26%)
[INFO] 13:34:19 填充批次: 50000 keys (range: 500000)
[INFO] 13:34:20 已填充: 250000/756224 keys (33%)
[INFO] 13:34:20 填充批次: 50000 keys (range: 500000)
[INFO] 13:34:21 已填充: 300000/756224 keys (39%)
[INFO] 13:34:21 填充批次: 50000 keys (range: 500000)
[INFO] 13:34:21 已填充: 350000/756224 keys (46%)
[INFO] 13:34:22 填充批次: 50000 keys (range: 500000)
[INFO] 13:34:22 已填充: 400000/756224 keys (52%)
[INFO] 13:34:23 填充批次: 50000 keys (range: 500000)
[INFO] 13:34:23 已填充: 450000/756224 keys (59%)
[INFO] 13:34:24 填充批次: 50000 keys (range: 500000)
[INFO] 13:34:24 已填充: 500000/756224 keys (66%)
[INFO] 13:34:25 填充批次: 50000 keys (range: 500000)
[INFO] 13:34:25 已填充: 550000/756224 keys (72%)
[INFO] 13:34:26 填充批次: 50000 keys (range: 500000)
[WARN] 13:34:26 内存已接近目标(1504MB/1536MB),停止填充
[INFO] 13:34:29 填充完成: 1504MB / 1536MB (97%), Keys: 333648, 耗时: 10s

========== 内存池统计信息 ==========
[INFO] 13:34:29 Redis内存详情:
used_memory:731248814
used_memory_human:697.37M
used_memory_rss:1577922560
used_memory_rss_human:1.47G
used_memory_peak:732248020
used_memory_peak_human:698.33M
used_memory_peak_perc:99.86%
used_memory_overhead:18525901
used_memory_startup:985677
used_memory_dataset:712722913
used_memory_dataset_perc:97.60%
allocator_allocated:731198294
allocator_active:1577890816
allocator_resident:1577890816
used_memory_lua:31744
used_memory_lua_human:31.00K
used_memory_scripts:0
used_memory_scripts_human:0B
allocator_frag_ratio:2.16
allocator_frag_bytes:846692522
allocator_rss_ratio:1.00
allocator_rss_bytes:0
mem_fragmentation_ratio:2.16
mem_fragmentation_bytes:846724266
mem_allocator:libc
[INFO] 13:34:29 进程内存映射统计:
Private_Dirty: 1539080 kB
Private_Clean: 1220 kB
Rss: 1541900 kB
Shared_Dirty: 0 kB
Shared_Clean: 1600 kB
Pss: 1540310 kB
Size: 1574812 kB
[INFO] 13:34:29 NUMA内存分布:

Per-node process memory usage (in MBs) for PID 519757 (redis-server)
                           Node 0           Total
                  --------------- ---------------
Huge                         0.00            0.00
Heap                         0.66            0.66
Stack                        0.02            0.02
Private                   1505.08         1505.08
----------------  --------------- ---------------
Total                     1505.76         1505.76

========== 内存碎片分析 ==========
[INFO] 13:34:29 内存碎片率: 2.16
[INFO] 13:34:29 分析内存块分布...
[INFO] 13:34:29 大内存块(>64MB)数量: 7
[INFO] 13:34:29 运行基础性能测试...
[INFO] 13:34:29 运行性能测试套件: quick_test (50000 请求)
"test","rps","avg_latency_ms","min_latency_ms","p50_latency_ms","p95_latency_ms","p99_latency_ms","max_latency_ms"
"SET","273224.03","0.560","0.064","0.551","0.887","1.231","1.399"
"GET","609756.06","0.243","0.064","0.239","0.359","0.543","0.943"
"INCR","657894.75","0.228","0.072","0.239","0.303","0.367","0.615"
"LPUSH","134408.59","1.163","0.064","1.095","2.095","2.391","2.607"
"RPUSH","136612.02","1.143","0.080","1.087","2.111","2.431","3.191"
"LPOP","134408.59","1.163","0.048","1.111","2.135","2.391","2.543"
"RPOP","131926.12","1.183","0.032","1.135","2.023","2.519","3.383"
"SADD","581395.31","0.262","0.112","0.263","0.351","0.519","1.407"
"HSET","454545.47","0.337","0.136","0.311","0.471","1.799","3.671"
"SPOP","510204.09","0.297","0.048","0.311","0.407","0.527","1.255"
"ZADD","340136.06","0.452","0.096","0.463","0.631","0.767","2.191"
"ZPOPMIN","92764.38","1.701","0.072","1.559","2.575","3.383","5.079"
[INFO] 13:34:32 收集内存池统计...

========== 内存池统计信息 ==========
[INFO] 13:34:32 Redis内存详情:
used_memory:710048497
used_memory_human:677.16M
used_memory_rss:1674649600
used_memory_rss_human:1.56G
used_memory_peak:732248020
used_memory_peak_human:698.33M
used_memory_peak_perc:96.97%
used_memory_overhead:21768621
used_memory_startup:985677
used_memory_dataset:688279876
used_memory_dataset_perc:97.07%
allocator_allocated:712500531
allocator_active:1674617856
allocator_resident:1674617856
used_memory_lua:31744
used_memory_lua_human:31.00K
used_memory_scripts:0
used_memory_scripts_human:0B
allocator_frag_ratio:2.35
allocator_frag_bytes:962117325
allocator_rss_ratio:1.00
allocator_rss_bytes:0
mem_fragmentation_ratio:2.35
mem_fragmentation_bytes:962149069
mem_allocator:libc
[INFO] 13:34:32 进程内存映射统计:
Private_Dirty: 1634000 kB
Private_Clean: 1220 kB
Rss: 1636820 kB
Shared_Dirty: 0 kB
Shared_Clean: 1600 kB
Pss: 1635230 kB
Size: 1669640 kB
[INFO] 13:34:32 NUMA内存分布:

Per-node process memory usage (in MBs) for PID 519757 (redis-server)
                           Node 0           Total
                  --------------- ---------------
Huge                         0.00            0.00
Heap                         1.11            1.11
Stack                        0.02            0.02
Private                   1597.32         1597.32
----------------  --------------- ---------------
Total                     1598.45         1598.45

========== 内存碎片分析 ==========
[INFO] 13:34:32 内存碎片率: 2.36
[INFO] 13:34:32 分析内存块分布...
[INFO] 13:34:32 大内存块(>64MB)数量: 0
[INFO] 13:34:32 快速测试完成
[INFO] 13:34:32 最终内存: 1597MB
[INFO] 13:34:32 最终Keys: 414716
[INFO] 13:34:32 NUMA配置:
[INFO] 13:34:32 内存监控已停止

========== 生成诊断报告 ==========
[INFO] 13:34:32 诊断报告已保存: /home/xdjtomato/下载/Redis with CXL/redis-CXL in v6.2.21/tests/reports/diagnosis_20260214_133414/DIAGNOSIS_SUMMARY.txt
