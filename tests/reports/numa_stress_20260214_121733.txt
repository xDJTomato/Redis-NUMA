快速测试 Sat Feb 14 12:17:33 CST 2026
[INFO] 12:17:33 执行FLUSHALL...
[INFO] 12:17:35 快速填充1.5GB数据...

========== 内存填充阶段 (目标: 1536MB, 渐进式填充避免OOM) ==========
[INFO] 12:17:35 当前内存: 45MB, 目标: 1536MB
[INFO] 12:17:35 需要填充: 1491MB
[WARN] 12:17:35 采用保守填充策略避免OOM: 批次=50000, value=2048B
[INFO] 12:17:35 计划填充: 763392 个 2048B 的key
[INFO] 12:17:35 启动内存监控 (PID=438238, 间隔=2秒)
[INFO] 12:17:35 内存监控已启动 (监控PID=439200)
[INFO] 12:17:35 填充批次: 50000 keys (range: 500000)
[INFO] 12:17:36 已填充: 50000/763392 keys (6%)
[INFO] 12:17:36 填充批次: 50000 keys (range: 500000)
[INFO] 12:17:36 已填充: 100000/763392 keys (13%)
[INFO] 12:17:37 填充批次: 50000 keys (range: 500000)
[INFO] 12:17:37 已填充: 150000/763392 keys (19%)
[INFO] 12:17:38 填充批次: 50000 keys (range: 500000)
[INFO] 12:17:38 已填充: 200000/763392 keys (26%)
[INFO] 12:17:39 填充批次: 50000 keys (range: 500000)
[INFO] 12:17:39 已填充: 250000/763392 keys (32%)
[INFO] 12:17:39 填充批次: 50000 keys (range: 500000)
[INFO] 12:17:40 已填充: 300000/763392 keys (39%)
[INFO] 12:17:40 填充批次: 50000 keys (range: 500000)
[INFO] 12:17:41 已填充: 350000/763392 keys (45%)
[INFO] 12:17:41 填充批次: 50000 keys (range: 500000)
[INFO] 12:17:42 已填充: 400000/763392 keys (52%)
[INFO] 12:17:42 填充批次: 50000 keys (range: 500000)
[INFO] 12:17:43 已填充: 450000/763392 keys (58%)
[INFO] 12:17:43 填充批次: 50000 keys (range: 500000)
[INFO] 12:17:43 已填充: 500000/763392 keys (65%)
[INFO] 12:17:44 填充批次: 50000 keys (range: 500000)
[INFO] 12:17:44 已填充: 550000/763392 keys (72%)
[INFO] 12:17:45 填充批次: 50000 keys (range: 500000)
[WARN] 12:17:45 内存已接近目标(1488MB/1536MB),停止填充
[INFO] 12:17:48 填充完成: 1488MB / 1536MB (96%), Keys: 333528, 耗时: 10s

========== 内存池统计信息 ==========
[INFO] 12:17:48 Redis内存详情:
used_memory:730988065
used_memory_human:697.12M
used_memory_rss:1561260032
used_memory_rss_human:1.45G
used_memory_peak:731977280
used_memory_peak_human:698.07M
used_memory_peak_perc:99.86%
used_memory_overhead:18520942
used_memory_startup:985518
used_memory_dataset:712467123
used_memory_dataset_perc:97.60%
allocator_allocated:730937545
allocator_active:1561228288
allocator_resident:1561228288
used_memory_lua:31744
used_memory_lua_human:31.00K
used_memory_scripts:0
used_memory_scripts_human:0B
allocator_frag_ratio:2.14
allocator_frag_bytes:830290743
allocator_rss_ratio:1.00
allocator_rss_bytes:0
mem_fragmentation_ratio:2.14
mem_fragmentation_bytes:830322487
mem_allocator:libc
[INFO] 12:17:48 进程内存映射统计:
Private_Dirty: 1521740 kB
Private_Clean: 1200 kB
Rss: 1525528 kB
Shared_Dirty: 0 kB
Shared_Clean: 2588 kB
Pss: 1522958 kB
Size: 1557452 kB
[INFO] 12:17:48 NUMA内存分布:

Per-node process memory usage (in MBs) for PID 438238 (redis-server)
                           Node 0           Total
                  --------------- ---------------
Huge                         0.00            0.00
Heap                         0.21            0.21
Stack                        0.02            0.02
Private                   1489.55         1489.55
----------------  --------------- ---------------
Total                     1489.77         1489.77

========== 内存碎片分析 ==========
[INFO] 12:17:48 内存碎片率: 2.14
[INFO] 12:17:48 分析内存块分布...
[INFO] 12:17:48 大内存块(>64MB)数量: 6
[INFO] 12:17:48 运行基础性能测试...
[INFO] 12:17:48 运行性能测试套件: quick_test (50000 请求)
"test","rps","avg_latency_ms","min_latency_ms","p50_latency_ms","p95_latency_ms","p99_latency_ms","max_latency_ms"
"SET","306748.47","0.498","0.064","0.495","0.815","1.207","1.711"
"GET","684931.50","0.218","0.056","0.215","0.311","0.391","1.151"
"INCR","806451.62","0.183","0.056","0.183","0.247","0.287","0.471"
"LPUSH","139664.80","1.116","0.056","1.071","1.991","2.447","2.615"
"RPUSH","135869.56","1.149","0.080","1.087","2.127","2.359","2.575"
"LPOP","135135.14","1.152","0.056","1.103","2.015","2.327","3.215"
"RPOP","136986.30","1.135","0.048","1.087","2.063","2.479","3.071"
"SADD","769230.81","0.190","0.064","0.183","0.271","0.415","0.951"
"HSET","625000.00","0.237","0.056","0.199","0.327","1.687","3.471"
"SPOP","649350.62","0.226","0.064","0.231","0.311","0.447","1.671"
"ZADD","495049.50","0.307","0.072","0.295","0.455","0.519","1.887"
"ZPOPMIN","85910.65","1.833","0.064","1.711","2.639","3.455","4.431"
[INFO] 12:17:51 收集内存池统计...

========== 内存池统计信息 ==========
[INFO] 12:17:51 Redis内存详情:
used_memory:710312466
used_memory_human:677.41M
used_memory_rss:1658408960
used_memory_rss_human:1.54G
used_memory_peak:731977280
used_memory_peak_human:698.07M
used_memory_peak_perc:97.04%
used_memory_overhead:21775342
used_memory_startup:985518
used_memory_dataset:688537124
used_memory_dataset_perc:97.07%
allocator_allocated:712557021
allocator_active:1658377216
allocator_resident:1658377216
used_memory_lua:31744
used_memory_lua_human:31.00K
used_memory_scripts:0
used_memory_scripts_human:0B
allocator_frag_ratio:2.33
allocator_frag_bytes:945820195
allocator_rss_ratio:1.00
allocator_rss_bytes:0
mem_fragmentation_ratio:2.33
mem_fragmentation_bytes:945851939
mem_allocator:libc
[INFO] 12:17:51 进程内存映射统计:
Private_Dirty: 1617216 kB
Private_Clean: 1200 kB
Rss: 1621004 kB
Shared_Dirty: 0 kB
Shared_Clean: 2588 kB
Pss: 1618435 kB
Size: 1652928 kB
[INFO] 12:17:51 NUMA内存分布:

Per-node process memory usage (in MBs) for PID 438238 (redis-server)
                           Node 0           Total
                  --------------- ---------------
Huge                         0.00            0.00
Heap                         0.32            0.32
Stack                        0.02            0.02
Private                   1582.66         1582.66
----------------  --------------- ---------------
Total                     1583.01         1583.01

========== 内存碎片分析 ==========
[INFO] 12:17:51 内存碎片率: 2.34
[INFO] 12:17:51 分析内存块分布...
[INFO] 12:17:51 大内存块(>64MB)数量: 0
[INFO] 12:17:51 快速测试完成
[INFO] 12:17:51 最终内存: 1581MB
[INFO] 12:17:51 最终Keys: 414888
[INFO] 12:17:51 NUMA配置:

========== 生成诊断报告 ==========
[INFO] 12:17:51 诊断报告已保存: /home/xdjtomato/下载/Redis with CXL/redis-CXL in v6.2.21/tests/reports/diagnosis_20260214_121733/DIAGNOSIS_SUMMARY.txt
